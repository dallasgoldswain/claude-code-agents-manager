# Recommended Directory Structure for Ruby Projects with Claude Code Subagents

your-ruby-project/
├── .claude/                          # Claude Code configuration directory
│   ├── agents/                       # Subagent configurations
│   │   ├── ruby-expert-pro.md       # Main Ruby expert (required)
│   │   ├── rails-api-expert.md      # Rails API specialist
│   │   ├── cli-gem-expert.md        # CLI and gem specialist
│   │   ├── ruby-performance-tester.md # Performance & testing specialist
│   │   └── project-config.md        # Project-specific customizations (optional)
│   │
│   └── templates/                    # Code generation templates (optional)
│       ├── service_object.rb.erb    # Service object template
│       ├── controller.rb.erb        # Controller template
│       └── test.rb.erb              # Test template
│
├── .claude.yaml                      # Main Claude configuration file
├── .rubocop.yml                      # RuboCop configuration (referenced by agents)
├── .gitignore                        # Git ignore file
├── Gemfile                           # Ruby dependencies
├── Gemfile.lock                      # Locked dependencies
├── README.md                         # Project documentation
│
├── app/                              # Rails application (if Rails project)
│   ├── controllers/                  # Controllers
│   │   ├── api/                     # API controllers (uses rails-api-expert)
│   │   │   └── v1/
│   │   │       ├── base_controller.rb
│   │   │       └── users_controller.rb
│   │   └── application_controller.rb
│   │
│   ├── models/                       # ActiveRecord models
│   │   ├── concerns/                 # Shared model concerns
│   │   └── user.rb
│   │
│   ├── services/                     # Service objects (uses ruby-expert-pro)
│   │   ├── user_service.rb
│   │   └── authentication_service.rb
│   │
│   ├── serializers/                  # API serializers (uses rails-api-expert)
│   │   └── user_serializer.rb
│   │
│   ├── forms/                        # Form objects
│   │   └── user_registration_form.rb
│   │
│   └── queries/                      # Query objects
│       └── user_query.rb
│
├── lib/                              # Library code
│   ├── your_gem/                    # Gem library (if gem project)
│   │   ├── version.rb
│   │   ├── configuration.rb
│   │   ├── cli.rb                   # CLI code (uses cli-gem-expert)
│   │   └── core.rb
│   │
│   └── tasks/                        # Rake tasks
│       └── performance.rake
│
├── exe/                              # Executable files (uses cli-gem-expert)
│   └── your-cli                      # CLI executable
│
├── test/                             # Minitest files (uses ruby-performance-tester)
│   ├── test_helper.rb               # Test configuration
│   ├── fixtures/                    # Test fixtures
│   ├── factories/                   # Factory definitions
│   ├── models/                      # Model tests
│   │   └── user_test.rb
│   ├── controllers/                 # Controller tests
│   │   └── api/
│   │       └── v1/
│   │           └── users_controller_test.rb
│   ├── services/                    # Service tests
│   │   └── user_service_test.rb
│   ├── integration/                 # Integration tests
│   │   └── user_flow_test.rb
│   └── performance/                 # Performance tests
│       └── load_test.rb
│
├── benchmarks/                       # Benchmark scripts (uses ruby-performance-tester)
│   ├── memory_benchmark.rb
│   └── speed_benchmark.rb
│
├── config/                           # Configuration files
│   ├── application.rb               # Rails application config
│   ├── database.yml                 # Database configuration
│   └── routes.rb                    # Routes configuration
│
├── db/                               # Database files
│   ├── migrate/                     # Migrations
│   ├── schema.rb                    # Database schema
│   └── seeds.rb                     # Seed data
│
├── docs/                             # Documentation
│   ├── api/                         # API documentation
│   ├── architecture.md              # Architecture decisions
│   └── performance.md               # Performance guidelines
│
└── scripts/                          # Utility scripts
    ├── setup.sh                     # Setup script
    ├── deploy.sh                    # Deployment script
    └── performance_check.rb        # Performance checking script

# Notes:
# 
# 1. Agent Auto-Assignment:
#    - ruby-expert-pro: Default for all .rb files
#    - rails-api-expert: app/controllers/api/**, app/serializers/**
#    - cli-gem-expert: exe/*, *.gemspec, lib/*/cli.rb
#    - ruby-performance-tester: test/**, benchmarks/**
#
# 2. Key Files to Create:
#    - .claude.yaml: Main configuration (use provided template)
#    - .claude/agents/: Copy all 4 agent .md files here
#    - .rubocop.yml: Your team's Ruby style configuration
#
# 3. Customization Points:
#    - Add project-config.md for team-specific rules
#    - Modify .claude.yaml for project needs
#    - Create templates/ for code generation patterns
#
# 4. Best Practices:
#    - Keep agents in version control
#    - Update agents based on team feedback
#    - Document agent customizations
#    - Monitor agent effectiveness metrics